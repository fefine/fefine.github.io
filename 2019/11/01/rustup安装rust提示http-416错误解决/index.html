<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>rustup安装rust提示http 416错误解决 | 山里的小房子</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-122273557-2','auto');ga('send','pageview');
</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">rustup安装rust提示http 416错误解决</h1><a id="logo" href="/.">山里的小房子</a><p class="description">a simple place</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">rustup安装rust提示http 416错误解决</h1><div class="post-meta">Nov 1, 2019<span> | </span><span class="category"><a href="/categories/rust/">rust</a></span></div><div class="post-content"><p>昨天在使用Rustup安装rust的时候了http status 416错误</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">info: profile set to &apos;default&apos;</span><br><span class="line">info: syncing channel updates for &apos;stable-x86_64-apple-darwin&apos;</span><br><span class="line">info: latest update on 2019-09-26, rust version 1.38.0 (625451e37 2019-09-23)</span><br><span class="line">info: downloading component &apos;cargo&apos;</span><br><span class="line">info: downloading component &apos;clippy&apos;</span><br><span class="line">info: downloading component &apos;rust-docs&apos;</span><br><span class="line">info: downloading component &apos;rust-std&apos;</span><br><span class="line">error: component download failed for rust-std-x86_64-apple-darwin</span><br><span class="line">error: caused by: could not download file from &apos;https://mirrors.tuna.tsinghua.edu.cn/rustup/dist/2019-09-26/rust-std-1.38.0-x86_64-apple-darwin.tar.xz&apos; to &apos;/Users/wkzq/.rustup/downloads/e1e7c617cd7ce655f20bc737e6832a01eefb19dd9163f6957317ee376aa4dd64.partial&apos;</span><br><span class="line">error: caused by: http request returned an unsuccessful status code: 416</span><br></pre></td></tr></table></figure>
<p>搜了一下在github上有讨论问题原因</p>
<blockquote>
<p>If a .partial file is actually complete, then any attempt to continue the download will fail because the byte-range request will be out-of-range. There is then no recovery method within rustup instead the user ends up having to delete the .partial file and try again.<br>In <a href="https://github.com/rust-lang/rustup.rs/issues/1243" target="_blank" rel="noopener">#1243</a> this has been discussed, and there’s at least one person for whom the partial file was corrupt, and one for whom it was complete, so we need to handle both of those cases.</p>
</blockquote>
<p>意思是你如果你已经下载完成了某个partial, 那么 下一次下载的request中的byte-range就会越界(加上了原来文件的byte length), <strong>所以解决办法就是删除掉HOME/.rust/download下的所有文件</strong></p>
<pre><code>rm -rf $HOME/.rust/download/*</code></pre><p>重新执行 <code>rustup init</code>就能正常安装rust了.</p>
<p>另外附上rust的两个中国源</p>
<ul>
<li><a href="http://mirrors.ustc.edu.cn/help/rust-static.html" target="_blank" rel="noopener">中科大</a></li>
<li><a href="https://mirror.tuna.tsinghua.edu.cn/help/rustup/" target="_blank" rel="noopener">清华</a></li>
</ul>
<h4 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h4><ul>
<li><p><a href="https://github.com/rust-lang/rustup.rs/issues/2071" target="_blank" rel="noopener">https://github.com/rust-lang/rustup.rs/issues/2071</a></p>
</li>
<li><p><a href="https://github.com/rust-lang/rustup.rs/issues/1854" target="_blank" rel="noopener">https://github.com/rust-lang/rustup.rs/issues/1854</a></p>
</li>
</ul>
<a id="more"></a>
<!-- markdownlint-disable MD041 MD002-->
</div><div class="tags"><a href="/tags/rust/">rust</a><a href="/tags/rustup/">rustup</a><a href="/tags/http-416/">http 416</a></div><div class="post-nav"><a class="pre" href="/2019/11/16/Golang%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9%E7%AE%80%E5%8D%95%E7%BB%9F%E8%AE%A1(%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0)/">Golang后端知识点简单统计(持续更新)</a><a class="next" href="/2019/10/28/%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A0/">这是一个测试文章</a></div><div id="container"></div><link rel="stylesheet" type="text/css" href="//unpkg.com/gitalk/dist/gitalk.css?v=0.0.0"><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=0.0.0"></script><script type="text/javascript" src="//unpkg.com/gitalk/dist/gitalk.min.js?v=0.0.0"></script><script>var gitalk = new Gitalk({
  clientID: 'bd1b249fb8967e67ca1f',
  clientSecret: '98a9cff75763d486c2b4b065703881fb40de42bb',
  repo: 'fefine.github.io',
  owner: 'fefine',
  admin: ['fefine'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://fefine.xyz"/></form></div><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="https://fefine.xyz"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/golang/">golang</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/golang/backend/">backend</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/redis/backend/">backend</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/rust/">rust</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/golang/" style="font-size: 15px;">golang</a> <a href="/tags/backend/" style="font-size: 15px;">backend</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/rust/" style="font-size: 15px;">rust</a> <a href="/tags/rustup/" style="font-size: 15px;">rustup</a> <a href="/tags/http-416/" style="font-size: 15px;">http 416</a> <a href="/tags/test/" style="font-size: 15px;">test</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/11/18/Redis%E7%9F%A5%E8%AF%86%E8%8D%AF%E5%BA%97/">Redis知识要点</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/16/Golang%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/">Golang面试准备</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/16/Golang%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9%E7%AE%80%E5%8D%95%E7%BB%9F%E8%AE%A1(%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0)/">Golang后端知识点简单统计(持续更新)</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/01/rustup%E5%AE%89%E8%A3%85rust%E6%8F%90%E7%A4%BAhttp-416%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3/">rustup安装rust提示http 416错误解决</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/28/%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A0/">这是一个测试文章</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/28/hello-world/">Hello World</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">山里的小房子.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>